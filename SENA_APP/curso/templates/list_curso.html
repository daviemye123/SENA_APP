{% extends "master.html" %}
{% load static %}

{% block title %}
    Lista de Cursos SENA
{% endblock %}

{% block content %}

<div class="list-container">
    
    <div class="list-header-row">
        <h1 class="list-title">Lista de Cursos SENA</h1>

        <div class="list-actions">
            <span class="total-badge">
                Total: {{ total_cursos|default:"0" }} cursos
            </span>

            <a href="/nuevo_curso/" class="btn-new-curso">
                Nuevo Curso
            </a>
        </div>
    </div>

    <table class="sena-table">
        <thead>
            <tr>
                <th>C√≥digo</th>
                <th>Nombre</th>
                <th>Programa</th>
                <th>Instructor Coordinador</th>
                <th>Fecha Inicio</th>
                <th>Fecha Fin</th>
                <th>Horario</th>
                <th>Aula</th>
                <th>Cupos</th>
                <th>Estado</th>
                <th class="actions-col">Acciones</th>
            </tr>
        </thead>

        <tbody>
            {% for curso in cursos %}
            <tr>
                <td><a href="{% url 'curso:detail_curso' curso.id %}">{{ curso.codigo }}</a></td>
                
                <td>{{ curso.nombre }}</td>
                <td>{{ curso.programa.nombre|default:"-" }}</td>
                <td>{{ curso.instructor_coordinador.nombre|default:"-" }}</td>
                
                <td>{{ curso.fecha_inicio|date:"d/m/Y" }}</td>
                <td>{{ curso.fecha_fin|date:"d/m/Y" }}</td>
                <td>{{ curso.horario }}</td>
                <td>{{ curso.aula }}</td>
                
                <td>
                    <span title="Ocupaci√≥n: {{ curso.porcentaje_ocupacion|floatformat:0 }}%">
                        {{ curso.aprendices.count }}/{{ curso.cupos_maximos }}
                    </span>
                </td>
                
                <td>
                    {% if curso.estado == 'PRO' %}
                    <span style="color: blue; font-weight: bold;">üìã Programado</span>
                    {% elif curso.estado == 'INI' %}
                    <span style="color: orange; font-weight: bold;">‚ñ∂ Iniciado</span>
                    {% elif curso.estado == 'EJE' %}
                    <span style="color: green; font-weight: bold;">‚úì En Ejecuci√≥n</span>
                    {% elif curso.estado == 'FIN' %}
                    <span style="color: gray; font-weight: bold;">‚úì Finalizado</span>
                    {% elif curso.estado == 'CAN' %}
                    <span style="color: red; font-weight: bold;">‚úó Cancelado</span>
                    {% elif curso.estado == 'SUS' %}
                    <span style="color: purple; font-weight: bold;">‚è∏ Suspendido</span>
                    {% endif %}
                </td>

                <td class="actions-col">
                    <a href="{% url 'curso:detail_curso' curso.id %}" class="btn-action btn-view">Ver</a>
                </td>
            </tr>

            {% empty %}
            <tr>
                <td colspan="11" style="text-align: center;">
                    No hay cursos registrados.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>

{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'all.css' %}">
{% endblock %}
